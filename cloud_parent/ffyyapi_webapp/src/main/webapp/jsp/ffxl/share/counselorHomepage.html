<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link rel="stylesheet" type="text/css" href="css/swiper-4.2.2.min.css"/>
		<link rel="stylesheet" type="text/css" href="css/global.css"/>
		<link rel="stylesheet" type="text/css" href="css/counselor.css"/>
	</head>
	<body style="padding-bottom: 5.5rem;">
		
		<div class="counselorHome">
			<div class="counselorBg"></div>
			<div class="counselorLayer"></div>
			<div class="counselorData">
				<div class="cd-left">
					<p>粉丝/<span></span></p>
				</div>
				<div class="cd-center">
					<div class="cd-img">
						<img class="cd-headImg" src=""/>
						<img class="cd-sex" src=""/>
						
					</div>
					<p>咨询/<span></span></p>
				</div>
				<div class="cd-right">
					<p>喜欢/<span></span></p>
				</div>
			</div>
			
			<div class="beGoodAt">
				<ul>
				</ul>
			</div>
		</div>
		
		
		
		<div class="counselorDetail">
			<dl>
				<dd class="counselorIntro">
					<h1 class="counselingTitle"><em></em>可约时间<a>查看7天 ></a></h1>
					<div class="swiper-container" id="counselingSchedule">
						<div class="swiper-pagination"></div>
						<div class="swiper-wrapper">
							<div class="swiper-slide" id="phoneSchedule">
								<div class="timeScale">
									<p class="scaleTitle">时段</p>
									<div class="scaleLine">
										<div class="bigScale">
											<p>00</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>03</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>06</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>09</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>12</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>15</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>18</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>21</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<p class="lastScale">24</p>
										</div>
									</div>
								</div>

								<div class="scheduleLine">
									<ul>
										<li>
											<p>今天</p>
											<div>
											</div>
										</li>

										<li>
											<p>明天</p>
											<div>
											</div>
										</li>

										<li>
											<p>后天</p>
											<div>
											</div>
										</li>
									</ul>
								</div>

							</div>
							<div class="swiper-slide" id="videoSchedule">
								<div class="timeScale">
									<p class="scaleTitle">时段</p>
									<div class="scaleLine">
										<div class="bigScale">
											<p>00</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>03</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>06</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>09</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>12</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>15</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>18</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>21</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<p class="lastScale">24</p>
										</div>
									</div>
								</div>

								<div class="scheduleLine">
									<ul>
										<li>
											<p>今天</p>
											<div>
											</div>
										</li>

										<li>
											<p>明天</p>
											<div>
											</div>
										</li>

										<li>
											<p>后天</p>
											<div>
											</div>
										</li>
									</ul>
								</div>
							</div>
							<div class="swiper-slide" id="lineSchedule">
								<div class="timeScale">
									<p class="scaleTitle">时段</p>
									<div class="scaleLine">
										<div class="bigScale">
											<p>00</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>03</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>06</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>09</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>12</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>15</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>18</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
										</div>

										<div class="bigScale">
											<p>21</p>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<div class="smallScale"></div>
											<p class="lastScale">24</p>
										</div>
									</div>
								</div>

								<div class="scheduleLine">
									<ul>
										<li>
											<p>今天</p>
											<div>
											</div>
										</li>

										<li>
											<p>明天</p>
											<div>
											</div>
										</li>

										<li>
											<p>后天</p>
											<div>
											</div>
										</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</dd>

				<dd class="counselingHint">
					<h1 class="counselingTitle"><em></em>咨询须知</h1>
					<div>
						<ul>
							<li>
								<img src="images/counselingHint1.png" alt="">
								<h1>电话咨询</h1>
								<p><i>￥</i><span>200</span>/次</p>
							</li>
							<li>
								<img src="images/counselingHint2.png" alt="">
								<h1>视频咨询</h1>
								<p><i>￥</i><span>200</span>/次</p>
							</li>
							<li>
								<img src="images/counselingHint3.png" alt="">
								<h1>线下咨询</h1>
								<p><i>￥</i><span>200</span>/次</p>
							</li>
						</ul>
					</div>
				</dd>


				<dd class="counselingIntro">
					<h1 class="counselingTitle"><em></em>咨询师简介</h1>
					<div>

					</div>
				</dd>
				
				<dd class="counselorEvaluate">
					<h1 class="counselingTitle"><em></em>评价</h1>
					<!--<p class="noData">还没有人评价</p>-->
					<!-- <div class="counselorTag">
						<span>有耐心(7)</span>
						<span>一针见血(7)</span>
						<span>回复很快(7)</span>
					</div> -->
					
					<ul>
						<!-- <li>
							<div class="evaluateHead">
								<img class="evaluateHeadImg" src=""/>
								<span>神奇的小镇</span>
								<p><img src="images/star.png"/><img src="images/star.png"/><img src="images/star.png"/><img src="images/star.png"/><img src="images/star.png"/></p>
							</div>
							<p class="evaluateCont">在高校担任专职心理咨询师超过5年，接触过大量与自信心建立和个人成长相关议题的青年个案。</p>
						</li>
						
						<li>
							<div class="evaluateHead">
								<img class="evaluateHeadImg" src=""/>
								<span>神奇的小镇</span>
								<p><img src="images/star.png"/><img src="images/star.png"/><img src="images/star.png"/><img src="images/star.png"/></p>
							</div>
							<p class="evaluateCont">在高校担任专职心理咨询师超过5年。</p>
						</li> -->
					</ul>
					
				</dd>
				
				
			</dl>
		</div>
		
		<div class="counselorBottom">
			<a class="cb-left"><img src="images/counselingLetter.png" alt="">私信</a>
			<a class="cb-right">立即预约</a>
		</div>
		
		<script src="js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
		<script src="js/swiper-4.2.2.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/fastclick.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/index.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">

			function counselorDetail(counselorId){
				$.ajax({
			        url: apiUrl+"/api_counselor/detail",
			        type: "post",
			        data: {counselorId:counselorId},
			        dataType: "json",
			        // async:false,
			        success: function(data) {
			        	if(data.success){
			                if(data.code == "2000"){
			                	var data = data.data;
								$(".counselorHome .counselorData .cd-headImg").attr("src",data.headUrl);
								$(".counselorHome .counselorBg").css("background-image","url("+data.headUrl+")")
								if (data.sex == "F") {
		                			$(".counselorData .cd-center .cd-img .cd-sex").attr("src","images/femaleIcon.png");
		                		} else {
		                			$(".counselorData .cd-center .cd-img .cd-sex").attr("src","images/maleIcon.png");
		                		}

								$(".counselorHome .counselorData .cd-left p span").text(data.fansCount);
								$(".counselorHome .counselorData .cd-center p span").text(data.consultCount);
								$(".counselorHome .counselorData .cd-right p span").text(data.supportCount);

								
								var skillName = "";
								if (data.skillNameList!= null) {
									$.each(data.skillNameList, function(i,item) {
										if (i<6) {
											skillName += "<li><p>"+item+"</p></li>"
										}
									});
								}
								$(".beGoodAt ul").html(skillName);

								
								for (var i = 0; i < data.aServiceList.length; i++) {
									if (data.aServiceList[i].type == "2") {
										$(".counselingHint ul li").eq(0).find("p span").text(data.aServiceList[i].price);
									} else if (data.aServiceList[i].type == "3") {
										$(".counselingHint ul li").eq(1).find("p span").text(data.aServiceList[i].price);
									} else if (data.aServiceList[i].type == "4") {
										$(".counselingHint ul li").eq(2).find("p span").text(data.aServiceList[i].price);
									}
								}



								var regCont = new RegExp("\n", 'g');
		                		
		                		var personalWord = "";
								var shareWord = "";
								var style = "";
								var method = "";
								var mentalPosition = "";
								var personalExperience = "";
								
								if (data.profieListModel.personalExperience != null) {
									personalWord = "<p>"+data.profieListModel.personalExperience+"</p>";
								}
								
								if (data.sendWord != null) {
									shareWord = "<h2>咨询师寄语</h2><p>"+data.sendWord+"</p>";
								}
								
								if (data.profieListModel.style != null) {
									style = "<h2>咨询风格</h2><p>"+data.profieListModel.style+"</p>";
								}
								
								if (data.profieListModel.method != null) {
									method = "<h2>咨询方法</h2><p>"+data.profieListModel.method+"</p>";
								}
								
								
								if (data.profieListModel.mentalPosition != null) {
									mentalPosition = "<h2>心理相关职位</h2><p>"+data.profieListModel.mentalPosition.replace(regCont,"<br/>")+"</p>";
								}
								
								var experienceList = "";
								if (data.experienceList!= null) {
									$.each(data.experienceList, function(i,item) {
										experienceList += "<li><h3>"+item.startDate+"~"+item.endDate+"</h3><p>"+item.content+"</p></li>"
									});
									personalExperience = "<h2>培训经历</h2><ul>"+experienceList+"</ul>";
								}

								$(".counselingIntro div").html(personalWord+shareWord+style+method+mentalPosition+personalExperience);

			                }else{
			                	
			                }
			            }
			        }
			    });
			}

			function counselorSchedule(counselorId){
				$.ajax({
			        url: apiUrl+"/api_counselor/all_type_schedule",
			        type: "post",
			        data: {counselorId:counselorId},
			        dataType: "json",
			        // async:false,
			        success: function(data) {
			        	if(data.success){
			                if(data.code == "2000"){
			                	var data = data.data;
								var phone = data.phone;
								var video = data.video;
								var line = data.line;
								
								if (phone != undefined) {
									$.each(phone, function(i,item) {
										if (i == 0) {
											for (var j = 0; j < item.daySetList.length; j++) {
												$("#phoneSchedule .scheduleLine ul li").eq(0).find("div").append("<em style='left:"+item.daySetList[j].left+";width:"+item.daySetList[j].width+"'></em>")
											}
										} else if (i == 1) {
											for (var j = 0; j < item.daySetList.length; j++) {
												$("#phoneSchedule .scheduleLine ul li").eq(1).find("div").append("<em style='left:"+item.daySetList[j].left+";width:"+item.daySetList[j].width+"'></em>")
											}
										} else if (i == 2) {
											for (var j = 0; j < item.daySetList.length; j++) {
												$("#phoneSchedule .scheduleLine ul li").eq(2).find("div").append("<em style='left:"+item.daySetList[j].left+";width:"+item.daySetList[j].width+"'></em>")
											}
										}
									});
								}

								if (video != undefined) {
									$.each(phone, function(i,item) {
										if (i == 0) {
											for (var j = 0; j < item.daySetList.length; j++) {
												$("#videoSchedule .scheduleLine ul li").eq(0).find("div").append("<em style='left:"+item.daySetList[j].left+";width:"+item.daySetList[j].width+"'></em>")
											}
										} else if (i == 1) {
											for (var j = 0; j < item.daySetList.length; j++) {
												$("#videoSchedule .scheduleLine ul li").eq(1).find("div").append("<em style='left:"+item.daySetList[j].left+";width:"+item.daySetList[j].width+"'></em>")
											}
										} else if (i == 2) {
											for (var j = 0; j < item.daySetList.length; j++) {
												$("#videoSchedule .scheduleLine ul li").eq(2).find("div").append("<em style='left:"+item.daySetList[j].left+";width:"+item.daySetList[j].width+"'></em>")
											}
										}
									});
								}

								if (line != undefined) {
									$.each(line, function(i,item) {
										if (i == 0) {
											for (var j = 0; j < item.daySetList.length; j++) {
												$("#lineSchedule .scheduleLine ul li").eq(0).find("div").append("<em style='left:"+item.daySetList[j].left+";width:"+item.daySetList[j].width+"'></em>")
											}
										} else if (i == 1) {
											for (var j = 0; j < item.daySetList.length; j++) {
												$("#lineSchedule .scheduleLine ul li").eq(1).find("div").append("<em style='left:"+item.daySetList[j].left+";width:"+item.daySetList[j].width+"'></em>")
											}
										} else if (i == 2) {
											for (var j = 0; j < item.daySetList.length; j++) {
												$("#lineSchedule .scheduleLine ul li").eq(2).find("div").append("<em style='left:"+item.daySetList[j].left+";width:"+item.daySetList[j].width+"'></em>")
											}
										}
									});
								}
								

			                }else{
			                	
			                }
			            }
			        }
			    });
			}




			function counselorTag(counselorId){
				$.ajax({
			        url: apiUrl+"/user_center/counselor_estimate_tag",
			        type: "post",
			        data: {counselorId:counselorId},
			        dataType: "json",
			        // async:false,
			        success: function(data) {
			        	if(data.success){
			                if(data.code == "2000"){
			                	var data = data.data;
								
								var tag = "";
								$.each(data, function(i,item) {
									tag += "<span>"+item.tName+"("+item.tCount+")"+"</span>";
								});

								var html = "<div class='counselorTag'>"+tag+"</div>";

								$(".counselorEvaluate .counselingTitle").after(html)

			                }else{
			                	
			                }
			            }
			        }
			    });
			}

			function commentList(counselorId){
				$.ajax({
			        url: apiUrl+"/api_counselor/estimate_list",
			        type: "post",
			        data: {counselorId:counselorId},
			        dataType: "json",
			        // async:false,
			        success: function(data) {
			        	if(data.success){
			                if(data.code == "2000"){
			                	var data = data.data;
								
								if (data.dataList != 0) {
									var html = "";
									$.each(data.dataList, function(i,item) {
										var stars = "";
										for (var j=0;j<item.serviceLevel;j++) {
											stars += "<img src='images/star.png'/>";
										}

										html += "<li>"+
											"<div class='evaluateHead'>"+
												"<img class='evaluateHeadImg' src='"+item.headUrl+"'/>"+
												"<span>"+item.userName+"</span>"+
												"<p>"+stars+"</p>"+
											"</div>"+
											"<p class='evaluateCont'>"+item.content+"</p>"+
										"</li>";
									});
									
									$(".counselorEvaluate ul").html(html);
									counselorTag(counselorId);
								} else {
									$(".counselorEvaluate .counselingTitle").after("<p class='noData'>还没有人评价</p>")
								}

			                }else{
			                	
			                }
			            }
			        }
			    });
			}

			
			
			
			var htmlPx = $("html").css("font-size")
			var remTurn = htmlPx.substr(0,htmlPx.length-2)
			
			
			
			var locationUrl = "";
			var wxtitle = "";
			var wximgUrl = "";
			var wxdesc = "";
			
			$(function(){
				var id = getQueryString("id");
				counselorDetail(id);
				counselorSchedule(id);
				commentList(id);


				var bannerSwiper = new Swiper('#counselingSchedule',{
				    pagination: {
						el: '.swiper-pagination',
						clickable: true,
						renderBullet: function (index, className) {
							switch(index){
								case 0:text='电话咨询';break;
								case 1:text='视频咨询';break;
								case 2:text='线下咨询';break;
							}
							return '<span class="' + className + '">' + text + '<em></em></span>';
						}
					}
				}) 
				

				$("body").on("click",".counselingTitle a,.counselorBottom",function(){
					more();
				})
			})
			
			
			
		</script>
	</body>
</html>